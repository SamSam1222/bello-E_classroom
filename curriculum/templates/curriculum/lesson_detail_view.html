{% extends 'base.html' %}

{% load static %}
{% load crispy_forms_tags %}


{% block content %}

<style>
      
  .food {
    position: relative;
    max-width: 100%;
    margin: 0 auto;
  }
  
  .food img {vertical-align: middle;}
  
  .food .note {
    position: absolute;
    bottom: 0;
    background: rgb(0, 0, 0); /* Fallback color */
    background: rgba(0, 0, 0, 0.5); /* Black background with 0.5 opacity */
    color: #f1f1f1;
    width: 100%;
    padding: 15px;
  }
  
       
  
  
  
  .card {
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    border-radius: 3px;
  }
  
  .card:hover {
    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
  }
  

  
  
  .overlay {
    position: absolute; 
    background: rgba(57, 57, 57, 0.5);
  
    /* center overlay text */
    display: flex;
    align-items: center;
    justify-content: center;
  }
  

  
  .overlay {
    position: absolute; 
    background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8));
    
    /* center overlay text */
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .overlay_2 {
    top: 0;
    right: 0;
    left: 0;
    bottom: 0; */
    inset: 0;
  }
  
  
  

  
  .overlay h2 {
    color: #fff;
    font-size: 2rem;
    font-weight: 500;
    margin: 0;
    font-family: cursive;
  }
  
  
  
  
  
  
  
  
  .cont {
    position: relative;
    width: 100%;
  }
  
  
  
  .middle {
    transition: .5s ease;
    opacity: 0;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    text-align: center;
  }
  
  .cont:hover .image {
    opacity: 0.1;
  }
  
  .cont:hover .middle {
    opacity: 1;
  }
  
  .cont:hover h2,
  .cont:focus h2{
    display: none;
  }

  
</style>



<section class="text-center">
 
    <h1 class="mb-2 mt-5 font-weight-bold" style="color:#ff5722; font-family: Georgia;">Lecture Details</h1>
    <!-- class row for description-->
    <div class="row d-flex justify-content-center mb-4">
      <!-- class column -->
      <div class="col-md-8 mb-2">
        <p class="" style="color: #040720	; font-family: Georgia; font-size: ;">Created on {{lessons.created_at}} by <cite title="Source Title">{{lessons.created_by}}</cite></p>
      </div>
    </div>



    <!-- video -->
    {% comment %} <div class="row d-flex justify-content-center mb-3"> {% endcomment %}

    <div style="text-align: center;">
      <video style="max-width: 100%;" controls>
          <source src="{{lessons.video.url}}" type="video/mp4">
      </video>
  </div>
  



  <div class="row row-cols-1 row-cols-md-3 g-4">
    <div class="col">
      <div class="card image_wrapper">
        <div class="">
          <a style="text-decoration: none;" href=""><img height="280" src="https://i.postimg.cc/w38FR9vN/pexels-anastasia-shuraeva-8466776.jpg" class=" image card-img-top " alt="...">
          <div class="card-body card overlay overlay_2">
            <h3 class="card-title" style="color: #7E3517; font-family: arial black; font-weight:900 ; ">Download Presentations </h3>
            {% if lessons.ppt %}

            <h5 class="card-title" style="color: white; font-family: Calibri; font-weight:; ">Download presentations from the lecture</h5>
            <br>
            <a href="{{lessons.ppt.url}}" ><button type="button" class="btn btn-info" style="font-family: Arial;">Get File</button></a>
            {% else %}
            <p class="card-text" > No PPT available</p>
            {% endif %}

          </div>
      </div>
      </div>
    </div>
    <div class="col">
      <div class="card image_wrapper">
        <div class="">
          <a style="text-decoration: none;" href=""><img height="280px" src="https://i.postimg.cc/vmNKHFWr/pexels-agung-pandit-wiguna-3401403.jpg" class=" image card-img-top " alt="...">
          <div class="card-body card overlay overlay_2">
            <h3 class="card-title" style="color: #7E3517; font-family: arial black; font-weight:900 ; ">Download Notes</h3>
            {% if lessons.Notes %}

            <h5 class="card-title" style="color: white; font-family: Calibri; font-weight:; ">Download notes from the lecture</h5>
            <br>
            <a href="{{lessons.Notes.url}}" ><button type="button" class="btn btn-info" style="font-family: Arial;">Get File</button></a>
            {% else %}
            <p class="card-text" > Notes not available</p>
            {% endif %}

          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card ">
        <div class="">
          <a style="text-decoration: none;" href=""><img height="280px" src="https://i.postimg.cc/6QgHxVXz/pexels-max-fischer-5212653.jpg" class=" image card-img-top " alt="...">
          <div class="card-body card overlay overlay_2">
            <h3 class="card-title" style="color: #7E3517; font-family: arial black; font-weight:900 ; ">Download Video </h3>
            {% if lessons.video %}

            <h5 class="card-title" style="color: white; font-family: Calibri; font-weight:; ">Download Video from the lecture</h5>
            <br>
            <a href="{{lessons.video.url}}" ><button type="button" class="btn btn-info" style="font-family: Arial;">Get File</button></a>
            {% else %}
            <p class="card-text" > No Video available</p>
            {% endif %}

          </div>
      </div>
    </div>
    </div>
   

    </div>



    <!-- update and delete button -->
    <div class="row d-flex justify-content-center mb-3 mt-3">
        {% if user.userprofileinfo.user_type == 'teacher' or user.is_superuser %}
        <div class="col-md-6 mb-3 text-center">
            <a href="{% url 'curriculum:lesson_update' standard=lessons.Standard.slug subject=lessons.subject.slug slug=lessons.slug %}" class="btn btn-warning btn-lg mr-4 btn-block" style="font-family: Arial;">Update Lesson</a>
        </div>
        <div class="col-md-6">
            <a href="{% url 'curriculum:lesson_delete' standard=lessons.Standard.slug subject=lessons.subject.slug slug=lessons.slug %}" class="btn btn-danger btn-lg mr-4 btn-block" style="font-family: Arial;"> Delete Lesson </a>
        </div>
        {% endif %}
      </div>
</section>

<hr class="my-5" style="color:#ff5722;">

<!-- Comments section -->
<section >
    <h2 class="mb-4 mt-5 font-weight-bold" style="color:#ff5722;">Questions And Queries</h2>
    <h4 class="mt-2 font-weight-bold" style="color:#ff5722;">Post your comment or question below:</h4>
    <br><br>
    <div class="container row">
      <div class="col-md-6">
                              <form method="post">
                                    <div class="form-group">
                                    {% csrf_token %}
                                    {{form|crispy}}
                                    <input type="submit" name="form" value="Add Comment" class="btn btn-primary btn-sm">
                                    </div>
                              </form>

      </div>
    </div>
    <div class="row">
      {% for comment in lessons.comments.all %}
      <div class="col-md-8 mt-2 mb-2">
                      <div class="media border p-3">
                          <img src="{% static 'Images/user_avatar.png' %}" alt="John Doe" class="mr-3 mt-3 rounded-circle" style="width:60px;">
                          <div class="media-body">
                                    <h4>{{comment.author}} <small><i>Posted on {{comment.date_added}}</i></small></h4>
                                    <p>{{comment.body}}</p>
                            {% for reply in comment.replies.all %}
                                        <div class="media p-3">
                                                <img src="{% static 'Images/user_avatar.png' %}" alt="Jane Doe" class="mr-3 mt-3 rounded-circle" style="width:45px;">
                                        <div class="media-body">
                                                <h5>{{reply.author}} <small><i>Posted on {{reply.date_added}}</i></small></h5>
                                                <p>{{reply.reply_body}}</p>
                                          </div>
                                        </div>
                            {% endfor %}
                            <!-- form to post reply -->
                            <form method="post">
                                  <input type="hidden" name="comment.id" value="{{comment.id}}">
                                  <input type="hidden" name="comment.comm_name" value="{{comment.comm_name}}">
                                  {% csrf_token %}
                                  {{form2.as_p}}
                                  <input type="submit" name="form2" value="Add Reply" class="btn btn-warning btn-sm">
                            </form>
                          </div>
                  </div>
      </div>
      {% endfor %}
    </div>


</section>

{%endblock%}
